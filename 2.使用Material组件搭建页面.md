# 使用Material组件搭建页面

## 创建项目
1. 命令：`ng new tasks --skip-install (-si) --style=scss`,(项目名不能加下划线)
2. 进入目录下执行`npm install`安装项目依赖
3. 开始创建module，使用`ng g m core , ng g m shared`创建核心模块和共享信息模块
4. 修改core.module.ts中的代码,使之仅加载一次
```js
export class CoreModule { 
  //使用SkipSelf,使用的时候默认不会在当前类里面寻找，不然构造函数的判断会一直卡死在当前类中
  //第一次加载不存在CoreModule，使用@Optional注解让其是可选的，如果有就判断，没有就直接构造
  constructor(@Optional() @SkipSelf() parent: CoreModule){
    if(parent) {
      throw new Error('Core模块已经加载，不允许重复加载！')
    }
  }
}
```
5. 在shared.module.ts中导入并导出CommonModule模块，以后还会再导入其他很多公共模块，然后让其他的模块统一继承Shared模块
6. 在app.module.ts中import到CommonModule，首次导入加载

## UI布局实现

### 1.Component组件创建
1. 使用`ng g c core/header --spec=false`创建一个Component Header头组件
2. 使用`ng g c core/footer --spec=false`创建一个Component Footer头组件
3. 使用`ng g c core/sidebar --spec=false`创建一个Component Sidebar头组件  

### 2.导出组件
在core.module.ts中exports出这三个组件,在app主模块中才能使用


## Angular Material UI组件库

### 安装Material组件库
命令:`cnpm i --save @angular/material@2.0.0-beta.7`

### 使用
1. 在core模块中导入`MdToolbarModule`
2. 使用`<md-sidenav-container>`标签去构建整个页面布局，使用`<md-sidenav #sidenav>`去创建一个左侧菜单栏
3. 使用`<md-toolbar color="primary">`构建工具栏

## 使用Material ICON图标
使用图标字体,其内建icon支持,支持svg,通过注入MdIconRegistry和DomSanitizer完成

### 改变菜单ICON
在Core核心组件中导入这两个东西`MdIconModule, MdButtonModule`,在Header中使用如下代码可以改变图标的显示
```html
<button md-icon-button (click)="openSidebar()">
  <md-icon>menu</md-icon>
</button>
```

### 创建工具导入外部svg
1. 创建utils工具类,使用MdIconRegistry将本地路径下的svg注册到项目中
```js
import { MdIconRegistry } from "@angular/material";
import { DomSanitizer } from "@angular/platform-browser";

export const loadSvgResources = (ir: MdIconRegistry, ds: DomSanitizer) => {
  ir.addSvgIcon('emoji',ds.bypassSecurityTrustResourceUrl('assets/emoji.svg'));
}

```
2. 在core初始化构造的时候加载一次
3. 在项目中使用,使用svgIcon指定注册名,代码如下
```html
<md-icon svgIcon="emoji"></md-icon>
```

## Input组件

### 组件使用
1. 在公共的Shared模块中导入`MdInputModule`的input模块
2. Login模块中导入了Shared模块后就可以使用`MdInputModule`了
3. 使用`ng g m login`创建login模块,再使用`ng g c login/login --spec=false`创建login组件,在login组件html中编写mdInput
```html
<md-card>
  <md-card-header>
    <md-card-title>登录</md-card-title>
  </md-card-header>

  <md-card-content>

    <md-input-container>
      <input mdInput type="text" placeholder="输入email">
    </md-input-container>

  </md-card-content>

  <md-card-actions>
    <p>没有账户?<a href="">注册吧!</a></p>
    <p>忘了密码?<a href="">找一下吧!</a></p>
  </md-card-actions>
</md-card>

```

### 路由使用
app.module.js 导入 app 全局的routing路由,在通过app-routing导入根模块下的login-routing,达到路由模块的拆分,路由配置代码如下:
```js
import { NgModule } from "@angular/core";
import { RouterModule, Routes } from '@angular/router';
import { LoginComponent } from 'app/login/login/login.component';


const routes: Routes = [
  { path: 'login', component: LoginComponent }
];

@NgModule({
  imports: [RouterModule.forChild(routes)],
  exports: [RouterModule]
})
export class LoginRoutingModule {}

```